POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=app
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/app
MINIO_ENDPOINT=minio:9000
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_BUCKET=resources
MINIO_SECURE=false
REDIS_URL=redis://redis:6379/0
NEO4J_AUTH=neo4j/neo4jpassword
OPENAI_API_BASE=https://api.aimlapi.com/v1
AIMLAPI_API_KEY=430402c0be614c02b816bb434558ef2d
AIMLAPI_BASE_URL=https://api.aimlapi.com/v1
OPENAI_API_KEY=430402c0be614c02b816bb434558ef2d
LLM_PROVIDER=aimlapi
LLM_MODEL_MINI=openai/gpt-5-mini-2025-08-07
LLM_MODEL_NANO=openai/gpt-5-nano-2025-08-07
EMBED_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBED_VERSION=all-MiniLM-L6-v2-2025-09
ENVIRONMENT=development
DEBUG=true

SEM_SPLIT_TAU=0.60
SEM_MIN_TOKENS=150
SEM_MAX_TOKENS=400
SEM_OVERLAP=2
DOUBT_TARGET_CHARS=1200

LLM_PREVIEW_MAX_TOKENS=4000
LLM_PREVIEW_MAX_CHARS=15000
LLM_RESPONSE_FORMAT_JSON=0

# Retrieval tunables (defaults used if unset)
RETRIEVAL_SIM_WEIGHT=0.7
RETRIEVAL_BM25_WEIGHT=0.3
RETRIEVAL_RESOURCE_BOOST=1.0
RETRIEVAL_PAGE_PROXIMITY=false

OTEL_ENABLE=1
USE_LLM_MOCK=0

MASTERY_STEP_CORRECT=0.1
MASTERY_STEP_WRONG=-0.05
MASTERY_DECAY_LAMBDA=

TEST_USER_ID=11111111-2222-3333-4444-555555555555

# Grounding thresholds (agents will refuse if no chunks pass these)
RAG_MIN_SCORE=0.35
RAG_MIN_SIM=0.30
RAG_MIN_BM25=0.15

PEDAGOGY_LLM_ENABLE=1
PEDAGOGY_LLM_MIN_CONF=0.5
PEDAGOGY_SECTION_MAX_CHARS=8000

ENHANCED_CHUNKING_ENABLED=true      # Main toggle
ENHANCED_TAGGING_ENABLED=true       # Hierarchical metadata
FORMULA_EXTRACTION_ENABLED=true     # Formula extraction
SEMANTIC_CHUNK_CONTENT_AWARE=true    # Content-aware sizing
PROMPT_SET=enhanced_ingest
# Extended context (INGEST-05)
EXTENDED_CONTEXT_ENABLED=true          # Context windows & figures
CONTEXT_WINDOW_CHARS=500                # Window size
# Chunk linking (INGEST-06)
CHUNK_LINKING_ENABLED=true             # Relationship graphs

PEDAGOGY_LLM_CLASSIFICATION=true
PEDAGOGY_LLM_CONFIDENCE_THRESHOLD=0.7

TUTOR_PREREQ_CHECK_ENABLED=true
TUTOR_PREREQ_MASTERY_THRESHOLD=0.6
TUTOR_PREREQ_WEAK_THRESHOLD=0.4
TUTOR_PREREQ_ALLOW_WEAK_PROCEED=false   #(if you want the weak-prereq gating toggle)

TUTOR_EXAMPLE_GENERATION_ENABLED=true
TUTOR_EXAMPLE_MIN_RELEVANCE=0.6
TUTOR_EXAMPLE_MIN_CONFIDENCE=0.5
TUTOR_EXAMPLE_CACHE_SIZE=100
TUTOR_EXAMPLE_DEFAULT_CONTEXT=everyday
TUTOR_STUDENT_BACKGROUND=general

TUTOR_MASTERY_REALTIME_UPDATE=true
TUTOR_MASTERY_LEARNING_RATE=0.1
TUTOR_MASTERY_DECAY_FACTOR=0.95
TUTOR_MASTERY_MIN_UPDATE=0.05
TUTOR_MASTERY_MAX_UPDATE=0.3
